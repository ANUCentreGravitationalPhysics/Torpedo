%alternative to gaussian whihc uses Matlab routine fmins to find minium of the error between%the data points and a gausian beam fit. About 4 times faster than gaussian.%%%%   NEEDS TO BE IN THE SAME FOLDER AS THE FUNCTION err.m %%%%%%% if err.m goes missing, take the commented lines from the bottom of thus file and same as% the function file err.m in the same folder as this file.%function beamscanglobal curr_date_time%%%%%% INPUTS %%%%%%%% beam diameters/micrometersa1 = [505 468 475 583 700 853]; Apt = 1; % X axis! is oriented horizontala2 = [533 466 433 443 546 727]; Apt = 2; % Y axis! is oriented vertial!!%% positions/mm%z=( (4-1.5) + (24-[24 22 20 18 16 14 12 10 8]) )*25.4;z = ([250 300 350 400 450 500]);  % from lens ROC=77.3 at 250mm from laser head%%wavelength/mmlambda=1064*10^(-6);[wX, zX] = gauss(a1, z, lambda);[wY, zY] = gauss(a2, z, lambda);z_values = z;z_vect=min(z_values)-50:0.1:max(z_values)+50;w_vect1=1e3*sqrt(wX.^2+(lambda./(pi.*wX)).^2.*(z_vect-zX).^2);w_vect2=1e3*sqrt(wY.^2+(lambda./(pi.*wY)).^2.*(z_vect-zY).^2);figure(2)h=plot(z, a1/2, 'ob', z, a2/2, 'xr', ...        z_vect, w_vect1, '-b', ...        z_vect, w_vect2, '-r', ...       'LineWidth',2);grid on;legend(['Apt 1 (X), fit: w_0 = ',num2str(wX*1000),' um, z_0 = ',num2str(zX),' mm'], ...    ['Apt 2 (Y), fit: w_0 = ',num2str(wY*1000),' um, z_0 = ',num2str(zY),' mm']);xlabel('(down stream lens) z/mm', 'FontSize', 14)ylabel('beam radius/mircometers', 'FontSize', 14)axis('tight')curr_date_time = datestr(now);title(['Beam Scan Fit - ', curr_date_time, ', f=212mm'], 'FontSize', 14);fileName = ['BeamScan_LaserB_After_L3_', datestr(now,'yyyymmdd')];saveas(gcf, [fileName, '.png'], 'png');print('-depsc2', [ fileName '.eps']);system(['pstopdf '  fileName '.eps '  fileName '.pdf']);%%%   Contents of err.m %%%%%